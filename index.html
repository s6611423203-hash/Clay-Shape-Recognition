// ... (‡πÇ‡∏Ñ‡πâ‡∏î HTML/CSS/DOM Elements ‡πÄ‡∏î‡∏¥‡∏°) ...

<script>
  // =====================
  // DOM Elements
  // =====================
  // ... (‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ DOM ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î) ...
  const fileInput = document.getElementById('fileInput');
  const btnUpload = document.getElementById('btnUpload');
  const btnStartCam = document.getElementById('btnStartCam');
  const btnStopCam = document.getElementById('btnStopCam');
  const video = document.getElementById('video');
  const preview = document.getElementById('preview');
  const placeholder = document.getElementById('placeholder');
  const camStatus = document.getElementById('camStatus');
  const modelStatus = document.getElementById('modelStatus');
  const top1 = document.getElementById('top1');
  const predList = document.getElementById('predList');
  const btnStartGame = document.getElementById("btnStartGame");
  const btnStopGameRound = document.getElementById("btnStopGameRound"); 
  const challengeText = document.getElementById("challenge");
  const challengeImage = document.getElementById("challengeImage");
  const timeDisplay = document.getElementById("time");
  const scoreDisplay = document.getElementById("currentScore");
  const scoreStarsDisplay = document.getElementById("scoreStars"); // DOM ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡∏∏‡∏î‡∏î‡∏≤‡∏ß
  const feedbackDisplay = document.getElementById("feedback");
  const roundInfoDisplay = document.getElementById("roundInfo");

  // =====================
  // ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏°‡πÄ‡∏î‡∏•
  // =====================
  const MODEL_URL = "./model/";
  let model, maxPredictions;
  let score = 0;
  
  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏î‡∏≤‡∏ß
  function updateScoreDisplay() {
    scoreDisplay.textContent = currentScore; // ‡∏¢‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏•‡πá‡∏Å ‡πÜ
    scoreStarsDisplay.textContent = '‚≠ê'.repeat(currentScore); // ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∏‡∏î‡∏î‡∏≤‡∏ß
  }
  
  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏õ‡∏∏‡πà‡∏°
  function enableInteraction() {
      btnUpload.disabled = false;
      btnStartCam.disabled = false;
      btnStartGame.disabled = false;
  }

  async function loadModel(){
    try{
      model = await tmImage.load(MODEL_URL+"model.json", MODEL_URL+"metadata.json");
      maxPredictions = model.getTotalClasses();
      modelStatus.innerHTML = '‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÇ‡∏°‡πÄ‡∏î‡∏•: <b style="color:var(--ok)">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</b> ‡∏û‡∏ö‡∏Ñ‡∏•‡∏≤‡∏™: '+maxPredictions;
      
      enableInteraction(); 
    }catch(err){
      console.error(err);
      modelStatus.classList.add('danger');
      modelStatus.innerHTML = '‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÇ‡∏°‡πÄ‡∏î‡∏•: <b style="color:var(--err)">‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</b> <br>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå **model/** ‡πÅ‡∏•‡∏∞‡∏•‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà';
    }
  }
  loadModel();

  // =====================
  // Class ‚Üí Sound/Image Mapping
  // =====================
  const CLASS_DATA = {
    "‡∏Ñ‡∏ß‡∏≤‡∏¢": { sound: "sounds/buffalo.mp3", image: "challenge_images/buffalo.png" },
    "‡∏£‡∏ñ": { sound: "sounds/car.mp3", image: "challenge_images/car.png" },
    "‡∏ö‡πâ‡∏≤‡∏ô": { sound: "sounds/house.mp3", image: "challenge_images/house.png" },
    "‡πÄ‡∏û‡∏ô‡∏Å‡∏ß‡∏¥‡∏ô": { sound: "sounds/penguin.mp3", image: "challenge_images/penguin.png" },
    "‡∏™‡∏∏‡∏ô‡∏±‡∏Ç": { sound: "sounds/dog.mp3", image: "challenge_images/dog.png" },
    "‡πÑ‡∏Å‡πà": { sound: "sounds/chicken.mp3", image: "challenge_images/chicken.png" },
    "‡∏õ‡∏•‡∏≤": { sound: "sounds/fish.mp3", image: "challenge_images/fish.png" },
    "‡∏´‡∏°‡∏π": { sound: "sounds/pig.mp3", image: "challenge_images/pig.png" }
  };
  let lastSoundTime=0;
  function playSoundForClass(label){
    const now=Date.now();
    if(now-lastSoundTime<3000)return;
    const data = CLASS_DATA[label];
    const file = data ? data.sound : null;
    
    if(file){
      const audio=new Audio(file);
      audio.volume=0.9;
      audio.play().catch(err=>console.warn("‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ:",err));
      lastSoundTime=now;
    }
  }

  // =====================
  // DOM / ‡∏Å‡∏•‡πâ‡∏≠‡∏á & ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)
  // =====================
  btnUpload.addEventListener('click',()=>fileInput.click());
  fileInput.addEventListener('change',async e=>{
    const file=e.target.files&&e.target.files[0];
    if(!file)return;
    stopCamera();
    const url=URL.createObjectURL(file);
    preview.src=url;
    await showImage();
    await predict(preview);
  });

  let stream,running=false;
  const TARGET_FPS=2;
  const FRAME_INTERVAL=1000/TARGET_FPS;
  let lastTime=0;

  async function startCamera(){
    if (!model) {
        camStatus.textContent = "‚ùå ‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô";
        return;
    }
    try{
      stream=await navigator.mediaDevices.getUserMedia({
        video:{width:{ideal:640},height:{ideal:480},facingMode:"environment"},
        audio:false
      });
      video.srcObject=stream;
      await new Promise(res=>video.onloadedmetadata=res);
      video.play();
      video.classList.remove('hidden');
      preview.classList.add('hidden');
      placeholder.classList.add('hidden');
      btnStopCam.classList.remove('hidden');
      camStatus.textContent='‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå: ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‚Ä¶';
      running=true;
      requestAnimationFrame(predictLoop);
    }catch(err){camStatus.textContent='‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ: '+err.message;}
  }
  function stopCamera(){
    running=false;
    if(stream){stream.getTracks().forEach(t=>t.stop());stream=null;}
    video.classList.add('hidden');
    btnStopCam.classList.add('hidden');
    camStatus.textContent='';
  }
  btnStartCam.addEventListener('click',startCamera);
  btnStopCam.addEventListener('click',stopCamera);

  async function predictLoop(now){
    if(!running)return;
    if(now-lastTime>=FRAME_INTERVAL){
      lastTime=now;
      if(model&&video.readyState>=2){
        try{const preds=await model.predict(video,false);renderPredictions(preds);}catch(e){console.error(e);}
      }
    }
    requestAnimationFrame(predictLoop);
  }

  async function showImage(){
    video.classList.add('hidden');
    preview.classList.remove('hidden');
    placeholder.classList.add('hidden');
    await new Promise(r=>(preview.onload=r));
  }
  async function predict(imgEl){
    if(!model){top1.textContent='‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°';return;}
    const predictions=await model.predict(imgEl,false);
    renderPredictions(predictions);
  }

  function renderPredictions(predictions){
    predictions.sort((a,b)=>b.probability-a.probability);
    const best=predictions[0];
    const pct=(best.probability*100).toFixed(1);
    top1.textContent=`AI ‡∏ó‡∏≤‡∏¢‡∏ß‡πà‡∏≤: üíñ ${best.className} üíñ (‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à ${pct}%)`;

    if(predList.childElementCount!==predictions.length){
      predList.innerHTML='';
      for(let i=0;i<predictions.length;i++){
        const row=document.createElement('div');
        row.className='pred';
        row.innerHTML=`<div class="name"></div><div class="bar"><span></span></div><div class="val"></div>`;
        predList.appendChild(row);
      }
    }
    [...predList.children].forEach((row,i)=>{
      const p=predictions[i];
      const percent=(p.probability*100).toFixed(1);
      row.querySelector('.name').textContent=p.className;
      row.querySelector('.bar > span').style.width=percent+'%';
      row.querySelector('.val').textContent=percent+'%';
    });

    if(best.probability>=0.6){
      playSoundForClass(best.className);
      checkPrediction(best.className); 
    }
  }

  // =====================
  // üéÆ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥
  // =====================
  let shuffledChallenges = []; // Array ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥

  /**
   * ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏•‡∏±‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö (Shuffle) ‡πÉ‡∏ô Array ‡πÅ‡∏ö‡∏ö Fisher-Yates
   */
  function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
      }
  }


  // =====================
  // üéÆ ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏Å‡∏°‡∏õ‡∏±‡πâ‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï: 5 ‡∏£‡∏≠‡∏ö, 3 ‡∏ô‡∏≤‡∏ó‡∏µ, ‡∏î‡∏≤‡∏ß)
  // =====================
  let currentScore = 0;
  let currentRound = 0;
  const MAX_ROUNDS = 5;
  const ROUND_TIME_SECONDS = 180;
  let currentChallenge = "";
  let roundTime = ROUND_TIME_SECONDS;
  let timerInterval;

  btnStartGame.addEventListener("click", startGame);
  btnStopGameRound.addEventListener("click", stopGame); 

  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° (‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏ö‡πÅ‡∏£‡∏Å)
  function startGame(){
    if(!model){
      feedbackDisplay.textContent = "‚ùå ‡πÇ‡∏°‡πÄ‡∏î‡∏• AI ‡∏¢‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà!";
      return;
    }
    currentScore = 0;
    currentRound = 0;
    
    // ‚≠êÔ∏è ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÉ‡∏´‡∏°‡πà: ‡∏™‡∏•‡∏±‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    shuffledChallenges = Object.keys(CLASS_DATA); 
    shuffleArray(shuffledChallenges); 

    updateScoreDisplay(); 
    btnStartGame.disabled = true;
    btnStopGameRound.classList.remove('hidden'); 
    startNewRound();
  }

  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏Å‡∏° (‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß/‡∏û‡∏±‡∏Å)
  function stopGame(){
    clearInterval(timerInterval);
    feedbackDisplay.textContent = "‚è∏Ô∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏±‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞! ‡∏ñ‡πâ‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î '‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°!' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠";
    feedbackDisplay.style.color = 'var(--warn)';
    
    btnStopGameRound.classList.add('hidden');
    btnStartGame.disabled = false;
  }

  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏ö‡πÄ‡∏Å‡∏°
  function endGame(){
    clearInterval(timerInterval);
    challengeText.innerHTML = `<h3>‡πÄ‡∏Å‡∏°‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß! ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! üéâ</h3>`;
    roundInfoDisplay.textContent = `‡πÑ‡∏î‡πâ‡∏î‡∏≤‡∏ß‡∏™‡∏∞‡∏™‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${currentScore} ‚≠ê`;
    timeDisplay.textContent = ``;
    feedbackDisplay.textContent = `‡∏õ‡∏±‡πâ‡∏ô‡∏Ñ‡∏£‡∏ö ${MAX_ROUNDS} ‡∏£‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß! ‡πÑ‡∏î‡πâ ${currentScore} ‡∏î‡∏≤‡∏ß!`;
    feedbackDisplay.style.color = 'var(--accent)';

    challengeImage.classList.add('hidden');
    btnStopGameRound.classList.add('hidden');
    btnStartGame.disabled = false;
  }


  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà
  function startNewRound(){
    currentRound++;
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏à‡∏ö‡πÄ‡∏Å‡∏°
    if (currentRound > MAX_ROUNDS) {
      endGame();
      return;
    }

    // ‚≠êÔ∏è ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÉ‡∏´‡∏°‡πà: ‡∏î‡∏∂‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏à‡∏≤‡∏Å‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß
    if (shuffledChallenges.length === 0) {
        endGame(); 
        return;
    }
    currentChallenge = shuffledChallenges.shift(); // ‡∏î‡∏∂‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ï‡∏±‡∏ß‡πÅ‡∏£‡∏Å‡∏≠‡∏≠‡∏Å‡∏°‡∏≤
    
    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
    roundInfoDisplay.textContent = `‚≠ê ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà ${currentRound} ‡∏à‡∏≤‡∏Å ${MAX_ROUNDS} ‡∏£‡∏≠‡∏ö`;
    
    const challengeImgPath = CLASS_DATA[currentChallenge].image;

    // 2. ‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå
    challengeText.innerHTML = `<h3>‡∏õ‡∏±‡πâ‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ AI ‡∏ó‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å: üé® ${currentChallenge}</h3>`;
    challengeImage.src = challengeImgPath;
    challengeImage.classList.remove('hidden');
    feedbackDisplay.textContent = '‡∏õ‡∏±‡πâ‡∏ô‡πÄ‡∏•‡∏¢! ‡∏™‡∏π‡πâ‡πÜ!';
    feedbackDisplay.style.color = 'var(--fg)';

    // 3. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
    roundTime = ROUND_TIME_SECONDS;
    clearInterval(timerInterval);
    timerInterval = setInterval(()=>{
      roundTime--;
      
      const minutes = Math.floor(roundTime / 60);
      const seconds = roundTime % 60;
      const timeStr = `${minutes}:${seconds.toString().padStart(2, '0')}`;
      
      timeDisplay.textContent = "‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤: " + timeStr;
      
      // ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ (20 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢)
      if (roundTime <= 20) {
          timeDisplay.style.color = 'var(--err)'; 
      } else {
          timeDisplay.style.color = 'var(--fg)';
      }

      if(roundTime <= 0){
        clearInterval(timerInterval);
        feedbackDisplay.textContent = `‚ùå ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤! ‡∏õ‡∏±‡πâ‡∏ô ${currentChallenge} ‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô!`;
        feedbackDisplay.style.color = 'var(--err)';
        setTimeout(startNewRound, 3000); // ‡∏£‡∏≠ 3 ‡∏ß‡∏¥‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà
      }
    },1000);
  }

  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
  function checkPrediction(label){
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡∏°‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏¢‡∏π‡πà ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤
    if(label === currentChallenge && roundTime > 0){
      currentScore++;
      updateScoreDisplay(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏î‡∏≤‡∏ß
      
      clearInterval(timerInterval);
      feedbackDisplay.textContent = `‚úÖ ‡πÑ‡∏î‡πâ‡∏î‡∏≤‡∏ß‡πÅ‡∏•‡πâ‡∏ß! ‡∏õ‡∏±‡πâ‡∏ô ${currentChallenge} ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!`;
      feedbackDisplay.style.color = 'var(--ok)'; 
      
      setTimeout(startNewRound, 3000); // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
    } else if (roundTime > 0 && label !== currentChallenge) {
      feedbackDisplay.textContent = `ü§î AI ‡∏ó‡∏≤‡∏¢‡∏ß‡πà‡∏≤ ${label}... ‡∏•‡∏≠‡∏á‡∏õ‡∏±‡πâ‡∏ô ${currentChallenge} ‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏™‡∏¥!`;
      feedbackDisplay.style.color = 'var(--warn)';
    }
  }
</script>
</body>
</html>
