<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏õ‡∏±‡πâ‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢</title>
  <meta name="description" content="‡πÄ‡∏Å‡∏°‡∏™‡πÅ‡∏Å‡∏ô‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡πâ‡∏ô‡∏î‡∏¥‡∏ô‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡πá‡∏Å‡∏≠‡∏ô‡∏∏‡∏ö‡∏≤‡∏•" />
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.16.0/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="icon" type="image/png" href="logo.png">
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700;900&display=swap" rel="stylesheet">

  <style>
  :root {
    /* ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏µ‡πÉ‡∏´‡πâ‡∏™‡∏î‡πÉ‡∏™‡πÅ‡∏•‡∏∞‡∏î‡∏π‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏¥‡∏ï‡∏£‡∏Å‡∏±‡∏ö‡πÄ‡∏î‡πá‡∏Å‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô */
    --bg-gradient: linear-gradient(135deg, #FFC0CB, #ADD8E6, #90EE90);
    --fg: #333333; 
    --muted: #6A6A6A;
    --card: rgba(255,255,255,0.95); 
    --accent: #FF69B4; /* ‡∏ä‡∏°‡∏û‡∏π‡∏™‡∏î */
    --ok: #3CB371; /* ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏™‡∏î */
    --warn: #FFA500; /* ‡∏™‡πâ‡∏° */
    --err: #FF4500; /* ‡πÅ‡∏î‡∏á‡∏™‡πâ‡∏° */
    --ring: #DDDDDD;
  }

  body {
    margin: 0;
    font-family: 'Kanit', ui-sans-serif, system-ui;
    background: var(--bg-gradient);
    background-attachment: fixed;
    color: var(--fg);
    font-size: 18px;
  }

  header { max-width: 960px; margin: 24px auto 0; padding: 0 16px; }
  .title.center { display: flex; flex-direction: column; align-items: center; text-align: center; }
  .logo { width: 160px; height: 160px; border-radius: 20px; overflow: hidden; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; }
  .logo img { max-width: 100%; max-height: 100%; object-fit: contain; }
  h1 { 
    font-size: clamp(30px, 6vw, 45px); 
    margin: 0; 
    color: var(--accent); 
    font-weight: 900;
  }
  p.sub { 
    color: var(--fg); 
    margin: 8px 0 16px; 
    font-size: 1.2em;
    font-weight: bold;
  }

  main { max-width: 960px; margin: 20px auto 56px; padding: 0 16px; }
  .card { 
    background: var(--card); 
    border: 1px solid var(--ring); 
    border-radius: 30px; 
    padding: 30px; 
    box-shadow: 0 12px 30px rgba(0,0,0,.15); 
    backdrop-filter: blur(5px); 
    margin-bottom: 25px; 
  }
  .row { display: grid; gap: 20px; }
  @media (min-width: 900px) { .row { grid-template-columns: 1.2fr .8fr; } }

  .controls { display: flex; flex-wrap: wrap; gap: 15px; margin: 10px 0 15px; justify-content: center; }
  .btn { 
    appearance: none; border: none; background: #fff; color: var(--fg);font-family: 'Kanit', sans-serif; 
    padding: 15px 24px; 
    border-radius: 20px; 
    cursor: pointer; transition: .2s; 
    box-shadow: 0 5px 15px rgba(0,0,0,.1);
    font-size: 1.1em; 
    font-weight: bold;
    display: flex; align-items: center; gap: 6px;
  }
  .btn:hover { transform: translateY(-3px) scale(1.03); }
  .btn.primary { background: var(--accent); color: #fff; }
  .btn.good { background: var(--ok); color: #fff; }
  .btn.warn { background: var(--warn); color: #fff; }
  .hidden { display: none!important; }
  .btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; box-shadow: none; }

  .previewBox { 
  background: rgba(255,255,255,0.9); 
  border: 4px dashed var(--accent); 
  border-radius: 20px; 
  /* min-height: 400px; */ /* <-- ‡∏•‡∏ö ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ */
  height: auto;       /* <-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ */
  aspect-ratio: 1 / 1; /* <-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ (‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏à‡∏±‡∏ï‡∏∏‡∏£‡∏±‡∏™) */
  display: grid; 
  place-items: center; 
  overflow: hidden; 
}
  video, img { 
  /* max-width: 100%; */ /* <-- ‡∏•‡∏ö ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ */
  /* height: auto; */    /* <-- ‡∏•‡∏ö ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ */
  width: 100%;       /* <-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ (‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏Å‡∏£‡∏≠‡∏ö) */
  height: 100%;      /* <-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ (‡πÉ‡∏´‡πâ‡∏™‡∏π‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏Å‡∏£‡∏≠‡∏ö) */
  object-fit: cover; /* <-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å! ‡πÉ‡∏ä‡πâ‡∏ã‡∏π‡∏°‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏î‡∏Ç‡∏≠‡∏ö‡∏ó‡∏¥‡πâ‡∏á) */
  display: block; 
  border-radius: 16px; 
}

  .status { font-size: 1.1em; color: var(--muted); font-weight: bold; }
  .result { 
    background: rgba(255,255,255,0.9); 
    border: 1px solid var(--ring); 
    border-radius: 20px; 
    padding: 20px; 
    box-shadow: 0 3px 10px rgba(0,0,0,.05); 
  }
  #top1 {
    font-size: 1.5em; 
    color: var(--accent);
    font-weight: 900;
    margin-top: 10px;
  }
  .pred { display: flex; align-items: center; justify-content: space-between; gap: 10px; margin: 10px 0; font-size: 1.1em; } 
  .bar { height: 15px; background: #f3f4f6; border-radius: 999px; overflow: hidden; flex: 1; margin: 0 10px; }
  .bar > span { display: block; height: 100%; background: var(--accent); width: 0%; }
  
  .foot { max-width: 960px; margin: 10px auto 32px; padding: 0 16px; color: var(--muted); font-size: 14px; text-align: center; }
  .note { padding: 15px; border-left: 6px solid var(--accent); background: #fdf2f8; border-radius: 10px; font-weight: bold; }
  .danger { border-left-color: var(--err); background: #fef2f2; }
  .ok { border-left-color: var(--ok); background: #ecfdf5; }
  #feedback { 
    font-size: 1.2em; 
    font-weight: bold; 
    color: var(--err); 
    min-height: 1.5em;
  }

  /* ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏î‡∏≤‡∏ß‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î */
  #scoreStars {
    font-size: 2.2em; 
    color: var(--warn); 
    display: block; 
    margin-top: 5px;
  }
  
  /* ======================== */
  /* POPUP & STAR EFFECT CSS */
  /* ======================== */
  .popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7); /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏°‡∏∑‡∏î‡∏•‡∏á */
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
  }

  .popup-overlay.show {
      opacity: 1;
      pointer-events: all;
  }

  .popup-content {
      background: var(--card);
      border-radius: 30px;
      padding: 40px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      transform: scale(0.8);
      transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏î‡πâ‡∏á */
      position: relative;
      z-index: 1001; /* ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏î‡∏≤‡∏ß‡∏ó‡∏µ‡πà‡∏ï‡∏Å‡∏•‡∏á‡∏°‡∏≤ */
      max-width: 90%;
  }

  .popup-overlay.show .popup-content {
      transform: scale(1);
  }

  .final-score {
      font-size: 1.5em;
      color: var(--fg);
      margin-bottom: 10px;
  }

  .star-display {
      font-size: 3.5em; /* ‡∏î‡∏≤‡∏ß‡πÉ‡∏´‡∏ç‡πà‡∏™‡∏∞‡πÉ‡∏à */
      color: var(--warn);
      margin: 15px 0;
      display: block;
  }

  #btnClosePopup {
      margin-top: 20px;
      padding: 12px 30px;
      font-size: 1.2em;
  }

  /* --- Star Falling Animation --- */
  .star-fall-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
  }

  @keyframes starFall {
      0% {
          transform: translateY(-10vh) scale(0);
          opacity: 0;
      }
      50% {
          opacity: 1;
          transform: scale(1);
      }
      100% {
          transform: translateY(100vh) scale(0.5);
          opacity: 0;
      }
  }

  .falling-star {
      position: absolute;
      color: #FFD700; /* ‡∏™‡∏µ‡∏ó‡∏≠‡∏á */
      font-size: 2em; 
      animation: starFall 6s linear infinite;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
  }
    #endGamePopup .btn {
  flex: 1; /* ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏ï‡πá‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡πà‡∏≤‡πÜ ‡∏Å‡∏±‡∏ô */
}
  </style>
</head>
<body>
  <header>
    <div class="title center">
      <div class="logo"><img src="logo.png" alt="Logo"></div>
      <div>
        <h1>‚ú® ‡∏õ‡∏±‡πâ‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢? ‚ú®</h1>
        <p class="sub">‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ üì∏ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û üñºÔ∏è ‡πÉ‡∏´‡πâ AI ‡∏ó‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏õ‡∏±‡πâ‡∏ô‡∏£‡∏π‡∏õ‡∏≠‡∏∞‡πÑ‡∏£!</p>
      </div>
    </div>
  </header>

  <main>
    <div class="card row">
      <section>
        <div class="controls">
          <button id="btnUpload" class="btn" disabled><span class="material-icons">file_upload</span>‡∏£‡∏π‡∏õ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</button>
          <input id="fileInput" type="file" accept="image/*" class="hidden" />
          <button id="btnStartCam" class="btn primary" disabled><span class="material-icons">photo_camera</span>‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏•‡∏¢!</button>
          <button id="btnStopCam" class="btn warn hidden"><span class="material-icons">stop</span>‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á</button>
        </div>
        <div id="stage" class="previewBox">
          <video id="video" class="hidden" playsinline autoplay muted></video>
          <img id="preview" alt="‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏†‡∏≤‡∏û" class="hidden" />
          <div id="placeholder" class="status">‚òùÔ∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡πâ‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢!</div>
        </div>
        <div style="margin-top:8px" class="status" id="camStatus"></div>
      </section>

      <aside>
        <div class="note" id="modelStatus">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÇ‡∏°‡πÄ‡∏î‡∏•: <b>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‚Ä¶</b></div>
        <div style="height:12px"></div>
        <div class="result">
          <div class="status">AI ‡∏ó‡∏≤‡∏¢‡∏ß‡πà‡∏≤‚Ä¶</div>
          <h3 id="top1">‚Äî</h3>
          <div id="predList"></div>
        </div>
      </aside>
    </div>

    <div class="result" style="margin-top:25px">
      <h3>üèÜ ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏Å‡∏°‡∏õ‡∏±‡πâ‡∏ô! üöÄ</h3>
      
      <div id="challenge"></div> 
      
      <div id="challengeImageContainer" style="margin: 10px 0; text-align: center;">
        <img id="challengeImage" src="" alt="‡∏£‡∏π‡∏õ‡πÇ‡∏à‡∏ó‡∏¢‡πå" class="hidden" style="max-width: 150px; height: auto; border-radius: 10px; border: 3px solid var(--accent);"/>
      </div>
      
      <div id="roundInfo" style="font-weight: bold;">‚Äî</div> <div id="time">‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤: ‚Äî ‡∏ß‡∏¥</div>
      
      <div id="scoreboard">‡πÑ‡∏î‡πâ‡∏î‡∏≤‡∏ß‡∏™‡∏∞‡∏™‡∏°: 
        <span id="currentScore">0</span>
        <span id="scoreStars"></span> 
      </div> 
      
      <div id="feedback"></div> 
      
      <div style="display: flex; gap: 10px; margin-top: 15px;">
        <button id="btnStartGame" class="btn good" type="button" disabled>
          <span class="material-icons">sports_esports</span> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°!
        </button>
        <button id="btnStopGameRound" class="btn warn hidden" type="button">
          <span class="material-icons">pause</span> ‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏±‡∏Å
        </button>
      </div>
    </div>


  </main>

  <footer class="foot">
    <div class="note">üí° **‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö** ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏ä‡∏±‡∏î ‡πÜ ‡∏°‡∏µ‡πÅ‡∏™‡∏á‡∏™‡∏ß‡πà‡∏≤‡∏á‡∏î‡∏µ ‡πÜ ‡∏â‡∏≤‡∏Å‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö ‡πÜ ‡∏à‡∏∞‡∏ó‡∏≤‡∏¢‡πÄ‡∏Å‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ô‡∏∞!</div>
  </footer>

  <div id="endGamePopup" class="popup-overlay hidden">
      <div class="star-fall-container"></div> <div class="popup-content">
          <h2 id="popupTitle">‡πÄ‡∏Å‡∏°‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß! ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å!</h2>
          <div id="popupScore" class="final-score"></div>
          <div id="popupStars" class="star-display"></div>
          <div style="display: flex; justify-content: center; gap: 15px;">
              <button id="btnBackToHome" class="btn">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
               <button id="btnClosePopup" class="btn primary">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á!</button>
        </div>
      </div>
  </div>

<script>
  // =====================
  // DOM Elements
  // =====================
  const fileInput = document.getElementById('fileInput');
  const btnUpload = document.getElementById('btnUpload');
  const btnStartCam = document.getElementById('btnStartCam');
  const btnStopCam = document.getElementById('btnStopCam');
  const video = document.getElementById('video');
  const preview = document.getElementById('preview');
  const placeholder = document.getElementById('placeholder');
  const camStatus = document.getElementById('camStatus');
  const modelStatus = document.getElementById('modelStatus');
  const top1 = document.getElementById('top1');
  const predList = document.getElementById('predList');
  const btnStartGame = document.getElementById("btnStartGame");
  const btnStopGameRound = document.getElementById("btnStopGameRound"); 
  const challengeText = document.getElementById("challenge");
  const challengeImage = document.getElementById("challengeImage");
  const timeDisplay = document.getElementById("time");
  const scoreDisplay = document.getElementById("currentScore");
  const scoreStarsDisplay = document.getElementById("scoreStars"); 
  const feedbackDisplay = document.getElementById("feedback");
  const roundInfoDisplay = document.getElementById("roundInfo");
  
  // DOM Elements ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Popup
  const endGamePopup = document.getElementById('endGamePopup');
  const popupTitle = document.getElementById('popupTitle');
  const popupScore = document.getElementById('popupScore');
  const popupStars = document.getElementById('popupStars');
  const btnClosePopup = document.getElementById('btnClosePopup');
  const starFallContainer = document.querySelector('.star-fall-container');
  const btnBackToHome = document.getElementById('btnBackToHome');
  
  // Event Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Popup
  btnBackToHome.addEventListener('click', () => {
    window.location.reload(); // ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
});
  btnClosePopup.addEventListener('click', closePopup);


  // =====================
  // ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏°‡πÄ‡∏î‡∏•
  // =====================
  const MODEL_URL = "./model/";
  let model, maxPredictions;
  let score = 0;
  
  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏î‡∏≤‡∏ß
  function updateScoreDisplay() {
    scoreDisplay.textContent = currentScore; 
    scoreStarsDisplay.textContent = '‚≠ê'.repeat(currentScore); 
  }
  
  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏õ‡∏∏‡πà‡∏°
  function enableInteraction() {
      btnUpload.disabled = false;
      btnStartCam.disabled = false;
      btnStartGame.disabled = false;
  }

  async function loadModel(){
    try{
      model = await tmImage.load(MODEL_URL+"model.json", MODEL_URL+"metadata.json");
      maxPredictions = model.getTotalClasses();
     
    const metadata = model.getMetadata();
    const classLabels = metadata.labels; // ‡∏î‡∏∂‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏≤‡∏™‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô Array
      modelStatus.innerHTML = `‚ú® ‡∏•‡∏≠‡∏á‡∏õ‡∏±‡πâ‡∏ô‡∏™‡∏¥‡πà‡∏á‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏™‡∏¥: <b style="color:var(--ok)">${classLabels.join(', ')}</b>`;
      
      enableInteraction(); 
    }catch(err){
      console.error(err);
      modelStatus.classList.add('danger');
      modelStatus.innerHTML = '‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÇ‡∏°‡πÄ‡∏î‡∏•: <b style="color:var(--err)">‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</b> <br>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå **model/** ‡πÅ‡∏•‡∏∞‡∏•‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà';
      
    }
  }
  loadModel();

  // =====================
  // Class ‚Üí Sound/Image Mapping
  // =====================
  const CLASS_DATA = {
¬† ¬† "‡∏î‡∏≤‡∏ß": { sound: "sounds/star.mp3", image: "challenge_images/star.png" },
¬† ¬† "‡∏´‡∏±‡∏ß‡πÉ‡∏à": { sound: "sounds/heart.mp3", image: "challenge_images/heart.png" },
¬† ¬† "‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ": { sound: "sounds/flower.mp3", image: "challenge_images/flower.png" },
¬† ¬† "‡∏Å‡∏•‡πâ‡∏ß‡∏¢": { sound: "sounds/banana.mp3", image: "challenge_images/banana.png" },
¬† ¬† "‡πÇ‡∏î‡∏ô‡∏±‡∏ó": { sound: "sounds/donut.mp3", image: "challenge_images/donut.png" },
¬† ¬† "‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•": { sound: "sounds/football.mp3", image: "challenge_images/football.png" }
¬†};
  let lastSoundTime=0;
  function playSoundForClass(label){
    const now=Date.now();
    if(now-lastSoundTime<3000)return;
    const data = CLASS_DATA[label];
    const file = data ? data.sound : null;
    
    if(file){
      const audio=new Audio(file);
      audio.volume=0.9;
      audio.play().catch(err=>console.warn("‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ:",err));
      lastSoundTime=now;
    }
  }

  // =====================
  // DOM / ‡∏Å‡∏•‡πâ‡∏≠‡∏á & ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î
  // =====================
  btnUpload.addEventListener('click',()=>fileInput.click());
  fileInput.addEventListener('change',async e=>{
    const file=e.target.files&&e.target.files[0];
    if(!file)return;
    stopCamera();
    const url=URL.createObjectURL(file);
    preview.src=url;
    await showImage();
    await predict(preview);
  });

  let stream,running=false;
  const TARGET_FPS=2;
  const FRAME_INTERVAL=1000/TARGET_FPS;
  let lastTime=0;

  async function startCamera(){
    if (!model) { 
        camStatus.textContent = "‚ùå ‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô";
        return;
    }
    try{
      stream=await navigator.mediaDevices.getUserMedia({
        video:{width:{ideal:640},height:{ideal:480},facingMode:"environment"},
        audio:false
      });
      video.srcObject=stream;
      await new Promise(res=>video.onloadedmetadata=res);
      video.play();
      video.classList.remove('hidden');
      preview.classList.add('hidden');
      placeholder.classList.add('hidden');
      btnStopCam.classList.remove('hidden');
      camStatus.textContent='‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå: ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‚Ä¶';
      running=true;
      requestAnimationFrame(predictLoop);
    }catch(err){camStatus.textContent='‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ: '+err.message;}
  }
  function stopCamera(){
    running=false;
    if(stream){stream.getTracks().forEach(t=>t.stop());stream=null;}
    video.classList.add('hidden');
    btnStopCam.classList.add('hidden');
    camStatus.textContent='';
  }
  btnStartCam.addEventListener('click',startCamera);
  btnStopCam.addEventListener('click',stopCamera);

  async function predictLoop(now){
    if(!running)return;
    if(now-lastTime>=FRAME_INTERVAL){
      lastTime=now;
      if(model&&video.readyState>=2){
        try{const preds=await model.predict(video,false);renderPredictions(preds);}catch(e){console.error(e);}
      }
    }
    requestAnimationFrame(predictLoop);
  }

  async function showImage(){
    video.classList.add('hidden');
    preview.classList.remove('hidden');
    placeholder.classList.add('hidden');
    await new Promise(r=>(preview.onload=r));
  }
  async function predict(imgEl){
    if(!model){top1.textContent='‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°';return;}
    const predictions=await model.predict(imgEl,false);
    renderPredictions(predictions);
  }

  function renderPredictions(predictions){
    predictions.sort((a,b)=>b.probability-a.probability);
    const best=predictions[0];
    const pct=(best.probability*100).toFixed(1);
    top1.textContent=`AI ‡∏ó‡∏≤‡∏¢‡∏ß‡πà‡∏≤: üíñ ${best.className} üíñ (‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à ${pct}%)`;

    if(predList.childElementCount!==predictions.length){
      predList.innerHTML='';
      for(let i=0;i<predictions.length;i++){
        const row=document.createElement('div');
        row.className='pred';
        row.innerHTML=`<div class="name"></div><div class="bar"><span></span></div><div class="val"></div>`;
        predList.appendChild(row);
      }
    }
    [...predList.children].forEach((row,i)=>{
      const p=predictions[i];
      const percent=(p.probability*100).toFixed(1);
      row.querySelector('.name').textContent=p.className;
      row.querySelector('.bar > span').style.width=percent+'%';
      row.querySelector('.val').textContent=percent+'%';
    });

    if(best.probability>=0.6){
      playSoundForClass(best.className);
      checkPrediction(best.className); 
    }
  }

  // =====================
  // üéÆ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥
  // =====================
  let shuffledChallenges = []; 

  function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
      }
  }


  // =====================
  // üéÆ ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏Å‡∏°‡∏õ‡∏±‡πâ‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
  // =====================
  let currentScore = 0;
  let currentRound = 0;
  const MAX_ROUNDS = 5;
  const ROUND_TIME_SECONDS = 180;
  let currentChallenge = "";
  let roundTime = ROUND_TIME_SECONDS;
  let timerInterval;

  btnStartGame.addEventListener("click", startGame);
  btnStopGameRound.addEventListener("click", stopGame); 

  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° (‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏ö‡πÅ‡∏£‡∏Å)
  function startGame(){
    if(!model){
      feedbackDisplay.textContent = "‚ùå ‡πÇ‡∏°‡πÄ‡∏î‡∏• AI ‡∏¢‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà!";
      return;
    }
    currentScore = 0;
    currentRound = 0; 
    
    // ‡∏™‡∏•‡∏±‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    shuffledChallenges = Object.keys(CLASS_DATA); 
    shuffleArray(shuffledChallenges); 

    updateScoreDisplay(); 
    btnStartGame.disabled = true;
    btnStopGameRound.classList.remove('hidden'); 
    startNewRound();
  }

  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏Å‡∏° (‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß/‡∏û‡∏±‡∏Å)
  function stopGame(){
    clearInterval(timerInterval);
    feedbackDisplay.textContent = "‚è∏Ô∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏±‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞! ‡∏ñ‡πâ‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î '‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°!' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠";
    feedbackDisplay.style.color = 'var(--warn)';
    
    btnStopGameRound.classList.add('hidden');
    btnStartGame.disabled = false;
  }
  
  // ‚≠êÔ∏è ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà: ‡∏õ‡∏¥‡∏î‡∏õ‡πä‡∏≠‡∏õ‡∏≠‡∏±‡∏û
  function closePopup() {
      endGamePopup.classList.remove('show');
      stopStarFallingEffect();
      
      // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î‡∏õ‡πä‡∏≠‡∏õ‡∏≠‡∏±‡∏û‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏Å‡∏°‡∏à‡∏ö‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß)
      startGame(); 
  }
  
  // ‚≠êÔ∏è ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏î‡∏≤‡∏ß‡∏£‡πà‡∏ß‡∏á
  function startStarFallingEffect(count) {
      // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô
      starFallContainer.innerHTML = ''; 

      for (let i = 0; i < count; i++) {
          const star = document.createElement('div');
          star.className = 'falling-star';
          star.textContent = '‚≠ê';
          
          star.style.left = `${Math.random() * 100}vw`;
          star.style.animationDelay = `${Math.random() * 6}s`;
          star.style.animationDuration = `${4 + Math.random() * 4}s`; 

          starFallContainer.appendChild(star);
      }
  }

  function stopStarFallingEffect() {
      starFallContainer.innerHTML = '';
  }


  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏ö‡πÄ‡∏Å‡∏° (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Popup)
  function endGame(){
    console.log("‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô endGame ‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÅ‡∏•‡πâ‡∏ß!"); // <-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ
    clearInterval(timerInterval);
    
    // ‚≠êÔ∏è ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ö‡∏ô Popup ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
    popupTitle.textContent = `‡πÄ‡∏Å‡∏°‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß! ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å!`;
    popupScore.textContent = `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: ${currentScore} ‡∏î‡∏≤‡∏ß`;
    popupStars.textContent = '‚≠ê'.repeat(currentScore);

    endGamePopup.classList.remove('hidden');
    endGamePopup.classList.add('show');
    
    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏î‡∏≤‡∏ß‡∏£‡πà‡∏ß‡∏á (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏î‡∏≤‡∏ß‡∏ó‡∏µ‡πà‡∏£‡πà‡∏ß‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ)
    startStarFallingEffect(currentScore * 8); 

    // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏Å‡∏°‡∏´‡∏•‡∏±‡∏Å
    challengeText.innerHTML = `<h3>‡πÄ‡∏Å‡∏°‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß! ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!</h3>`;
    roundInfoDisplay.textContent = `‚Äî`;
    timeDisplay.textContent = ``;
    feedbackDisplay.textContent = `‚Äî`;
    challengeImage.classList.add('hidden');
    btnStopGameRound.classList.add('hidden');
    btnStartGame.disabled = false;
  }


  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà
  function startNewRound(){
    currentRound++;
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏à‡∏ö‡πÄ‡∏Å‡∏°
    if (currentRound > MAX_ROUNDS) {
      endGame();
      return;
    }

    // ‡∏î‡∏∂‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏à‡∏≤‡∏Å‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß
    if (shuffledChallenges.length === 0) {
        endGame(); 
        return;
    }
    currentChallenge = shuffledChallenges.shift(); // ‡∏î‡∏∂‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ï‡∏±‡∏ß‡πÅ‡∏£‡∏Å‡∏≠‡∏≠‡∏Å‡∏°‡∏≤
    
    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
    roundInfoDisplay.textContent = `‚≠ê ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà ${currentRound} ‡∏à‡∏≤‡∏Å ${MAX_ROUNDS} ‡∏£‡∏≠‡∏ö`;
    
    const challengeImgPath = CLASS_DATA[currentChallenge].image;

    // 2. ‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå
    challengeText.innerHTML = `<h3>‡∏õ‡∏±‡πâ‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ AI ‡∏ó‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å: üé® ${currentChallenge}</h3>`;
    challengeImage.src = challengeImgPath;
    challengeImage.classList.remove('hidden');
    feedbackDisplay.textContent = '‡∏õ‡∏±‡πâ‡∏ô‡πÄ‡∏•‡∏¢! ‡∏™‡∏π‡πâ‡πÜ!';
    feedbackDisplay.style.color = 'var(--fg)';

    // 3. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
    roundTime = ROUND_TIME_SECONDS;
    clearInterval(timerInterval);
    timerInterval = setInterval(()=>{
      roundTime--;
      
      const minutes = Math.floor(roundTime / 60);
      const seconds = roundTime % 60;
      const timeStr = `${minutes}:${seconds.toString().padStart(2, '0')}`;
      
      timeDisplay.textContent = "‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤: " + timeStr;
      
      // ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ (20 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢)
      if (roundTime <= 20) {
          timeDisplay.style.color = 'var(--err)'; 
      } else {
          timeDisplay.style.color = 'var(--fg)';
      }

      if(roundTime <= 0){
        clearInterval(timerInterval);
        feedbackDisplay.textContent = `‚ùå ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤! ‡∏õ‡∏±‡πâ‡∏ô ${currentChallenge} ‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô!`;
        feedbackDisplay.style.color = 'var(--err)';
        setTimeout(startNewRound, 3000); // ‡∏£‡∏≠ 3 ‡∏ß‡∏¥‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà
      }
    },1000);
  }

  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
  function checkPrediction(label){
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡∏°‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏¢‡∏π‡πà ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤
    if(label === currentChallenge && roundTime > 0){
      currentScore++;
      updateScoreDisplay(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏î‡∏≤‡∏ß
      
      clearInterval(timerInterval);
      feedbackDisplay.textContent = `‚úÖ ‡πÑ‡∏î‡πâ‡∏î‡∏≤‡∏ß‡πÅ‡∏•‡πâ‡∏ß! ‡∏õ‡∏±‡πâ‡∏ô ${currentChallenge} ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!`;
      feedbackDisplay.style.color = 'var(--ok)'; 
      
      setTimeout(startNewRound, 3000); // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
    } else if (roundTime > 0 && label !== currentChallenge) {
      feedbackDisplay.textContent = `ü§î AI ‡∏ó‡∏≤‡∏¢‡∏ß‡πà‡∏≤ ${label}... ‡∏•‡∏≠‡∏á‡∏õ‡∏±‡πâ‡∏ô ${currentChallenge} ‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏™‡∏¥!`;
      feedbackDisplay.style.color = 'var(--warn)';
    }
  }
</script>
</body>
</html>
